================================================================================
                    COMMANDES PROXMOX - AIDE-MÃ‰MOIRE
================================================================================

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GESTION DES SERVICES PROXMOX
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

VÃ©rifier le statut :
  systemctl status pve-cluster          # Cluster Proxmox
  systemctl status pvedaemon            # DÃ©mon principal
  systemctl status pveproxy             # Proxy web

RedÃ©marrer les services :
  systemctl restart pve-cluster
  systemctl restart pvedaemon
  systemctl restart pveproxy


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GESTION DES MACHINES VIRTUELLES (qm)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Liste et informations :
  qm list                               # Lister toutes les VMs
  qm status <VMID>                      # Statut d'une VM
  qm config <VMID>                      # Configuration d'une VM

ContrÃ´le de l'alimentation :
  qm start <VMID>                       # DÃ©marrer une VM
  qm shutdown <VMID>                    # ArrÃªt propre (ACPI)
  qm stop <VMID>                        # ArrÃªt forcÃ©
  qm reboot <VMID>                      # RedÃ©marrer une VM

Console :
  qm terminal <VMID>                    # AccÃ©der au terminal sÃ©rie

Snapshots :
  qm listsnapshot <VMID>                # Lister les snapshots
  qm snapshot <VMID> <snapname>         # CrÃ©er un snapshot
  qm rollback <VMID> <snapname>         # Restaurer un snapshot
  qm delsnapshot <VMID> <snapname>      # Supprimer un snapshot

Clone et template :
  qm clone <VMID> <NEWID> --name <nom>  # Cloner une VM
  qm template <VMID>                    # Convertir en template

Migration :
  qm migrate <VMID> <node>              # Migrer vers un autre nÅ“ud
  qm migrate <VMID> <node> --online     # Migration Ã  chaud

Suppression :
  qm destroy <VMID>                     # Supprimer une VM
  qm destroy <VMID> --purge             # Supprimer VM + disques

  pct console <CTID>                    # Console du conteneur

Snapshots :
  pct listsnapshot <CTID>               # Lister les snapshots
  pct snapshot <CTID> <snapname>        # CrÃ©er un snapshot
  pct rollback <CTID> <snapname>        # Restaurer un snapshot
  pct delsnapshot <CTID> <snapname>     # Supprimer un snapshot

Clone et template :
  pct clone <CTID> <NEWID>              # Cloner un conteneur
  pct template <CTID>                   # Convertir en template

Migration :
  pct migrate <CTID> <node>             # Migrer vers un autre nÅ“ud
  pct migrate <CTID> <node> --restart   # Migrer avec redÃ©marrage

Suppression :
  pct destroy <CTID>                    # Supprimer un conteneur
  pct destroy <CTID> --purge            # Supprimer conteneur + disques


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Liste et informations :
  pct list                              # Lister tous les conteneurs
  pct status <CTID>                     # Statut d'un conteneur
  pct config <CTID>                     # Configuration d'un conteneur

ContrÃ´le de l'alimentation :
  pct start <CTID>                      # DÃ©marrer un conteneur
  pct shutdown <CTID>                   # ArrÃªt propre
  pct stop <CTID>                       # ArrÃªt forcÃ©
  pct reboot <CTID>                     # RedÃ©marrer un conteneur

Console :
  pct enter <CTID>                      # Entrer dans le conteneur (shell)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¾ GESTION DU STOCKAGE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Lister le stockage :
  pvesm status                          # Statut de tous les stockages
  pvesm list <storage>                  # Contenu d'un stockage
  pvesm list local                      # Voir les fichiers sur local

Informations d'espace :
  pvesm status --storage <storage>      # Espace disponible
  df -h                                 # Espace disque global

GÃ©rer les ISO :
  pvesm list local --content iso        # Lister les ISO
  cd /var/lib/vz/template/iso           # Dossier des ISO


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¿ GESTION DES BACKUPS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Sauvegarder une VM :
  vzdump <VMID>                         # Backup simple
  vzdump <VMID> --mode snapshot         # Backup avec snapshot
  vzdump <VMID> --storage <storage>     # Backup vers un stockage
  vzdump <VMID> --compress zstd         # Backup avec compression

Sauvegarder un conteneur :
  vzdump <CTID> --mode snapshot         # Backup de conteneur

Restaurer une VM :
  qmrestore <backup-file> <VMID>        # Restaurer une VM
  qmrestore local:vzdump-xxx.vma.zst 100 --storage local-lvm

Restaurer un conteneur :
  pct restore <CTID> <backup-file>      # Restaurer un conteneur

Lister les backups :
  pvesm list <storage> --content backup # Voir les backups disponibles


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŒ GESTION DU RÃ‰SEAU
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Configuration rÃ©seau :
  cat /etc/network/interfaces           # Voir la config rÃ©seau
  systemctl restart networking          # RedÃ©marrer le rÃ©seau
  ifreload -a                           # Recharger la config rÃ©seau

VÃ©rifier les bridges :
  brctl show                            # Lister les bridges
  ip link show                          # Interfaces rÃ©seau

Tests rÃ©seau :
  ping -c 4 <IP>                        # Test de connectivitÃ©
  ip addr show                          # Adresses IP
  ip route show                         # Table de routage


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š MONITORING ET LOGS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Informations systÃ¨me :
  pveversion --verbose                  # Version Proxmox dÃ©taillÃ©e
  pveperf                               # Test de performances
  pvesh get /version                    # Version via API

Logs :
  journalctl -u pveproxy                # Logs du proxy
  journalctl -u pvedaemon               # Logs du dÃ©mon
  journalctl -f                         # Suivre les logs en temps rÃ©el
  tail -f /var/log/syslog               # Logs systÃ¨me

TÃ¢ches :
  pvesh get /cluster/tasks              # Lister les tÃ¢ches
  qm showcmd <VMID>                     # Voir la commande QEMU


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¥ GESTION DU CLUSTER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Informations cluster :
  pvecm status                          # Statut du cluster
  pvecm nodes                           # Lister les nÅ“uds
  pvecm expected 1                      # Mode quorum forcÃ© (dÃ©pannage)

Haute disponibilitÃ© :
  ha-manager status                     # Statut HA
  ha-manager config                     # Configuration HA


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”‘ GESTION DES UTILISATEURS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Utilisateurs :
  pveum user list                       # Lister les utilisateurs
  pveum user add <user@pam> --password  # Ajouter un utilisateur
  pveum passwd <user@pam>               # Changer le mot de passe

Permissions :
  pveum role list                       # Lister les rÃ´les
  pveum acl list                        # Lister les ACL
  pveum aclmod / -user <user@pam> -role Administrator


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”¥ COMMANDES DE DÃ‰PANNAGE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

DÃ©verrouiller une VM :
  qm unlock <VMID>                      # Retirer le verrou

RÃ©initialiser la configuration web :
  pvesh delete /access/ticket           # Invalider les sessions

Nettoyer les ressources :
  qm cleanup <VMID> clean-shutdown      # Nettoyer aprÃ¨s arrÃªt sale
  qm cleanup <VMID> clean-failed        # Nettoyer aprÃ¨s Ã©chec

VÃ©rifier les processus :
  ps aux | grep kvm                     # Processus VM en cours
  pgrep -a qemu                         # Processus QEMU

RÃ©parer le stockage :
  lvs                                   # Lister les volumes logiques
  vgs                                   # Lister les groupes de volumes
  pvs                                   # Lister les volumes physiques



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
CRÃ‰ATION ET CONFIGURATION DE VM
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CrÃ©er une VM (sans disque) :
  qm create 100 \
    --name vm-test \
    --memory 2048 \
    --cores 2 \
    --net0 virtio,bridge=vmbr0

Ajouter un disque virtuel :
  qm set 100 --scsi0 local-lvm:20       # Disque de 20 Go sur local-lvm

Ajouter un ISO d'installation :
  qm set 100 --ide2 local:iso/debian-12.iso,media=cdrom

================================================================================